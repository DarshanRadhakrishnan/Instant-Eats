/**\n * Service-to-Service Communication Module\n * Replaces direct axios calls and message queues with type-safe OpenAPI clients\n * Centralizes all inter-service communication\n */\n\nimport { OpenAPIServiceClient, serviceClientFactory } from '../../../shared/openapi/client';\nimport { getServiceUrl } from '../../../shared/openapi/services';\n\n/**\n * Initialize all service clients for inter-service communication\n * Call this once during service startup\n */\nexport const initializeServiceClients = () => {\n  // Auth Service Client\n  serviceClientFactory.createClient({\n    serviceName: 'auth-service',\n    baseURL: getServiceUrl('auth'),\n    timeout: 10000,\n    retries: 3,\n  });\n\n  // Order Service Client\n  serviceClientFactory.createClient({\n    serviceName: 'order-service',\n    baseURL: getServiceUrl('order'),\n    timeout: 10000,\n    retries: 3,\n  });\n\n  // Restaurant Service Client\n  serviceClientFactory.createClient({\n    serviceName: 'restaurant-service',\n    baseURL: getServiceUrl('restaurant'),\n    timeout: 10000,\n    retries: 3,\n  });\n\n  // Delivery Service Client\n  serviceClientFactory.createClient({\n    serviceName: 'delivery-service',\n    baseURL: getServiceUrl('delivery'),\n    timeout: 10000,\n    retries: 3,\n  });\n\n  // Tracking Service Client\n  serviceClientFactory.createClient({\n    serviceName: 'tracking-service',\n    baseURL: getServiceUrl('tracking'),\n    timeout: 10000,\n    retries: 3,\n  });\n\n  console.log('âœ… All service clients initialized');\n};\n\n/**\n * Get client for specific service\n */\nexport const getServiceClient = (serviceName: string): OpenAPIServiceClient => {\n  const client = serviceClientFactory.getClient(serviceName);\n  if (!client) {\n    throw new Error(`Service client '${serviceName}' not initialized`);\n  }\n  return client;\n};\n\n/**\n * Order Service API Methods\n */\nexport const orderServiceApi = {\n  createOrder: (data: any) => getServiceClient('order-service').post('/', data),\n  getOrder: (orderId: string) => getServiceClient('order-service').get(`/${orderId}`),\n  updateOrderStatus: (orderId: string, status: string) =>\n    getServiceClient('order-service').put(`/${orderId}`, { status }),\n  cancelOrder: (orderId: string, reason: string) =>\n    getServiceClient('order-service').post(`/${orderId}/cancel`, { reason }),\n  getCancellationInfo: (orderId: string) =>\n    getServiceClient('order-service').get(`/${orderId}/cancellation-info`),\n};\n\n/**\n * Restaurant Service API Methods\n */\nexport const restaurantServiceApi = {\n  searchRestaurants: (filters: any) =>\n    getServiceClient('restaurant-service').get('/', { params: filters }),\n  getRestaurant: (restaurantId: string) =>\n    getServiceClient('restaurant-service').get(`/${restaurantId}`),\n  getMenu: (restaurantId: string) =>\n    getServiceClient('restaurant-service').get(`/${restaurantId}/menu`),\n  getMenuItem: (restaurantId: string, itemId: string) =>\n    getServiceClient('restaurant-service').get(`/${restaurantId}/menu/${itemId}`),\n};\n\n/**\n * Delivery Service API Methods\n */\nexport const deliveryServiceApi = {\n  getAvailablePartners: (filters: any) =>\n    getServiceClient('delivery-service').get('/partners', { params: filters }),\n  getPartner: (partnerId: string) =>\n    getServiceClient('delivery-service').get(`/partners/${partnerId}`),\n  updatePartnerLocation: (partnerId: string, location: any) =>\n    getServiceClient('delivery-service').patch(`/partners/${partnerId}`, { currentLocation: location }),\n  assignDelivery: (data: any) =>\n    getServiceClient('delivery-service').post('/assignments', data),\n  getAssignment: (assignmentId: string) =>\n    getServiceClient('delivery-service').get(`/assignments/${assignmentId}`),\n  updateAssignmentStatus: (assignmentId: string, status: string, location?: any) =>\n    getServiceClient('delivery-service').patch(`/assignments/${assignmentId}`, {\n      status,\n      currentLocation: location,\n    }),\n};\n\n/**\n * Tracking Service API Methods\n */\nexport const trackingServiceApi = {\n  getTracking: (orderId: string) =>\n    getServiceClient('tracking-service').get(`/tracking/${orderId}`),\n  updateTracking: (orderId: string, data: any) =>\n    getServiceClient('tracking-service').post(`/tracking/${orderId}/updates`, data),\n};\n\n/**\n * Auth Service API Methods\n */\nexport const authServiceApi = {\n  verifyToken: (token: string) =>\n    getServiceClient('auth-service').get('/verify', {\n      headers: { Authorization: `Bearer ${token}` },\n    }),\n  refreshToken: () => getServiceClient('auth-service').post('/auth/refresh'),\n  validateCredentials: (email: string, password: string) =>\n    getServiceClient('auth-service').post('/auth/validate', { email, password }),\n};\n